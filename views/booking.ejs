<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
  <link rel="stylesheet" href="/style3.css">
</head>
<body>
    <header class="container-fluid d-flex justify-content-start align-items-center py-4">
        <div class="d-flex align-items-center me-auto ">
          <a href="#" class="text-decoration-none d-flex align-items-center">
            <h1 class="me-5">crowwd</h1>
          </a>
          <form class="d-flex me-3" action="/search-events" method="POST">
            <input class="form-control me-2" type="search" placeholder="Search for events,locations.." aria-label="Search"
              id="searchInput" name="searchQuery">
            <button class="btn btn-outline-success " type="submit"><i class="fa-solid fa-magnifying-glass"></i></button>
          </form>
        </div>
        <div class="me-4 ms-lg-auto ms-lg-5 justify-content-lg-start">
          <form class="d-none d-lg-flex me-lg-5 ms-lg-auto" action="/search-events-by-date-and-location" method="POST">
            <div class="input-group">
              <label id="date-header" for="from-date" class="me-2">From :</label>
              <input type="date" class="form-control me-2" id="from-date" name="fromDate">
              <label id="date-header" for="to-date" class="me-2">To :</label>
              <input type="date" class="form-control me-2" id="to-date" name="toDate">
              <label id="date-header" for="select-location" class="me-2">Select location </label>
              <select id="to-date" class="form-select me-2" name="location" id="cities">
                <option value="Alappuzha">Alappuzha</option>
                <option value="Thrissur">Thrissur</option>
                <option value="Palakkad">Palakkad</option>
                <option value="Malappuram">Malappuram</option>
                <option value="Manjeri">Manjeri</option>
                <option value="Thalassery">Thalassery</option>
                <option value="Kannur">Kannur</option>
                <option value="Kasaragod">Kasaragod</option>
                <option value="Kollam">Kollam</option>
                <option value="Neyyattinkara">Neyyattinkara</option>
                <option value="Kottayam">Kottayam</option>
                <option value="Pala">Pala</option>
                <option value="Aluva">Aluva</option>
                <option value="Angamaly">Angamaly</option>
                <option value="Thodupuzha">Thodupuzha</option>
                <option value="Muvattupuzha">Muvattupuzha</option>
                <option value="Perumbavoor">Perumbavoor</option>
                <option value="Kothamangalam">Kothamangalam</option>
                <option value="Vaikom">Vaikom</option>
                <option value="Cherthala">Cherthala</option>
                <option value="Changanassery">Changanassery</option>
                <option value="Kozhencherry">Kozhencherry</option>
                <option value="Adoor">Adoor</option>
                <option value="Pathanamthitta">Pathanamthitta</option>
                <option value="Pandalam">Pandalam</option>
                <option value="Kayamkulam">Kayamkulam</option>
                <option value="Mavelikkara">Mavelikkara</option>
                <option value="Chengannur">Chengannur</option>
                <option value="Thiruvalla">Thiruvalla</option>
                <option value="Punalur">Punalur</option>
                <option value="Paravur">Paravur</option>
                <option value="Kochi">Kochi</option>
                <option value="Kozhikode">Kozhikode</option>
                <option value="Thiruvananthapuram">Thiruvananthapuram</option>
                <option value="Kollam">Kollam</option>
              </select>
            </div>
            <button class="btn btn-outline-success" type="submit" id="go">Go</button>
          </form>
        </div>
        <div class="d-none d-lg-flex align-items-center">
          <div id="myNav" class="overlay">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <div class="overlay-content">
              <a href="/">Logout</a>
              <a href="/profile">Profile</a>
              <a href="/admin">List an event</a>
              <a href="#">Contact</a>
            </div>
          </div>
          <span id="sandwich" onclick="openNav()">&#9776;</span>
        </div>
      </header>


      <div class="booking">
        <h1>Book Your Event: <%= event.eventName %></h1>
        <form action="<PAYMENT_GATEWAY_INTEGRATION>" method="post">
            <input type="hidden" name="event_id" value="<%= event._id %>">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
            <label for="phone">Phone:</label>
            <input type="tel" id="phone" name="phone" required>
            <label for="quantity">Quantity:</label>
            <input type="number" id="quantity" name="quantity" min="1" required>
            <button type="submit">Pay &#8377;<%= event.eventPrice %></button>
        </form>

      </div>


      <script>
        const quantity = document.getElementById('quantity').value;
    const id = document.getElementsByClassName('travel')[0].id;
    const uniqueId = `${id}@${quantity}`
    const encodedUniqueId = encodeURIComponent(uniqueId);
    const qrcode = new QRCode(document.getElementById("qrCode"), {
      text: encodedUniqueId,
      width: 256,
      height: 256,
      colorDark: "#000000",
      colorLight: "#ffffff",
      correctLevel: QRCode.CorrectLevel.M
    })
    document.getElementById("qrCode").style.display = "block"
    document.getElementById('bookEventForm').addEventListener('submit', function (event) {
      var quantityInput = document.getElementById('quantity');
      var quantityValue = parseInt(quantityInput.value, 10);

      if (isNaN(quantityValue) || quantityValue <= 0) {
        alert('Please enter a valid quantity.');
        event.preventDefault(); 
      }
    });
      </script>
    
</body>
</html>